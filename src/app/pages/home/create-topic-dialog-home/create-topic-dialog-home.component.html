<div class="modern-create-topic-container">
  <div class="form-header">
    <div class="header-icon">
      <mat-icon>topic</mat-icon>
    </div>
    <div class="header-text">
      <h1 class="dialog-title">Crear Nuevo Tema de Ayuda</h1>
      <p class="dialog-subtitle">Configurar nuevo tema para soporte</p>
    </div>
  </div>

  <div class="dialog-body">
    <form [formGroup]="topicForm" (ngSubmit)="onCreate()">
      <div class="form-row">
        <mat-form-field appearance="outline" class="form-field full-width">
          <mat-label>Nombre del Tema</mat-label>
          <input matInput formControlName="name" placeholder="Ej. Instalación de Aplicación">
        </mat-form-field>
      </div>

      <div class="form-row">
        <mat-form-field appearance="outline" class="form-field">
          <mat-label>Departamento</mat-label>
          <mat-select formControlName="department" required>
            <mat-option *ngFor="let dept of departments" [value]="dept._id">
              {{ dept.name }}
            </mat-option>
          </mat-select>
          <mat-hint>Selecciona un departamento</mat-hint>
        </mat-form-field>

        <mat-form-field appearance="outline" class="form-field">
          <mat-label>Tiempo de expiración (minutos)</mat-label>
          <input matInput type="number" formControlName="expIn" placeholder="Ej. 120">
          <mat-hint>Tiempo límite para resolver</mat-hint>
        </mat-form-field>
      </div>

      <div class="form-row">
        <mat-form-field appearance="outline" class="form-field full-width">
          <mat-label>Etiquetas</mat-label>
          <mat-chip-list #chipList aria-label="Etiquetas seleccionadas">
            <mat-chip *ngFor="let tag of tags" [selectable]="true" [removable]="true" (removed)="removeTag(tag)">
              {{ tag }}
              <button mat-icon-button *ngIf="true" (click)="removeTag(tag)">
                <mat-icon>cancel</mat-icon>
              </button>
            </mat-chip>
            <input matInput
                   [formControl]="tagsControl"
                   [matChipInputFor]="chipList"
                   [matChipInputSeparatorKeyCodes]="separatorKeysCodes"
                   (matChipInputTokenEnd)="addTag($event)"
                   placeholder="Añadir etiqueta"
            />
          </mat-chip-list>
          <mat-hint>Presiona Enter para añadir una etiqueta</mat-hint>
        </mat-form-field>
      </div>
    </form>
  </div>

  <div class="dialog-actions">
    <button type="button" class="cancel-btn" (click)="onCancel()">
      <mat-icon>close</mat-icon>
      Cancelar
    </button>
    <button type="button" class="save-btn" (click)="onCreate()">
      <mat-icon>add</mat-icon>
      Crear Tema
    </button>
  </div>
</div>
