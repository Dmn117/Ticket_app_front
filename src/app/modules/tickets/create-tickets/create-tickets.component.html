<div class="modern-create-tickets-container">
  <div class="form-header">
    <div class="header-icon">
      <mat-icon>confirmation_number</mat-icon>
    </div>
    <div class="header-text">
      <h1 class="dialog-title">Crear Ticket de Soporte</h1>
      <p class="dialog-subtitle">Formulario para crear nuevos tickets de soporte técnico</p>
    </div>
  </div>

  <div class="dialog-body">
    <form [formGroup]="ticketForm" (ngSubmit)="createTicket()">
      <div class="form-row">
        <mat-form-field appearance="outline" class="form-field">
          <mat-label>Título del Ticket</mat-label>
          <input 
            matInput 
            formControlName="title" 
            type="text" 
            placeholder="Ej: Problema con acceso al sistema"
            maxlength="100"
            required>
          <mat-hint align="end">{{ticketForm.get('title')?.value?.length || 0}}/100</mat-hint>
          <mat-error *ngIf="ticketForm.get('title')?.hasError('required')">
            El título es requerido
          </mat-error>
          <mat-error *ngIf="ticketForm.get('title')?.hasError('minlength')">
            El título debe tener al menos 5 caracteres
          </mat-error>
        </mat-form-field>
      </div>

      <div class="form-row description-row">
        <mat-form-field appearance="outline" class="form-field description-field">
          <mat-label>Descripción Detallada</mat-label>
          <textarea 
            matInput 
            formControlName="description" 
            placeholder="Describe detalladamente el problema o solicitud..."
            rows="4"
            maxlength="1000"
            required></textarea>
          <mat-hint align="end">{{ticketForm.get('description')?.value?.length || 0}}/1000</mat-hint>
          <mat-error *ngIf="ticketForm.get('description')?.hasError('required')">
            La descripción es requerida
          </mat-error>
        </mat-form-field>
      </div> 
    </form>
  </div>

  <div class="dialog-actions">
    <button 
      type="button" 
      class="cancel-btn" 
      mat-dialog-close>
      <mat-icon>close</mat-icon>
      Cancelar
    </button>
    
    <button 
      type="button" 
      class="save-btn" 
      [disabled]="noMatch || ticketForm.invalid || isSubmitting"
      (click)="createTicket()">
      <mat-icon>confirmation_number</mat-icon>
      {{ isSubmitting ? 'Creando...' : 'Crear Ticket' }}
    </button>
  </div>
</div>